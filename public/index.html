<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ガチャポン</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header class="site-header">
    <h1>ガチャポン</h1>
    <nav class="tabs">
      <button class="tab-btn active" data-tab="gacha">ガチャポン</button>
      <button class="tab-btn" data-tab="serials">シリアル番号発行所</button>
      <button class="tab-btn" data-tab="inventory">景品入荷</button>
    </nav>
  </header>

  <main>
    <!-- ガチャポン -->
    <section id="tab-gacha" class="tab active">
      <div class="gacha-wrap">
        <div class="machine">
          <div class="wheel" id="wheel"></div>
          <div class="needle"></div>
          <div class="capsule-drop" id="capsule"></div>
        </div>
        <div class="ctrls">
          <div class="spins">残り回数: <span id="spins">0</span></div>
          <button id="btn-spin">SPIN!</button>
          <div class="redeem">
            <input id="serial" placeholder="シリアル番号" />
            <button id="btn-redeem">回数を追加</button>
          </div>
        </div>
      </div>

      <div class="result">
        <h2>結果</h2>
        <div id="result-title">-</div>
        <video id="result-video" controls playsinline></video>
      </div>

      <div class="collection">
        <h2>マイコレクション</h2>
        <div id="collection-list" class="collection-list"></div>
      </div>
    </section>

    <!-- シリアル番号発行所 -->
    <section id="tab-serials" class="tab">
      <div class="admin-login" id="serials-login">
        <h2>管理ログイン</h2>
        <input id="admin-password-serial" type="password" placeholder="管理パスワード" />
        <button data-login-target="serials">ログイン</button>
      </div>

      <div class="admin-area hidden" id="serials-area">
        <h2>シリアル番号の発行</h2>
        <div class="grid">
          <label>追加回数（1コードあたり）<input id="serial-spins" type="number" min="1" value="1"></label>
          <label>発行数<input id="serial-qty" type="number" min="1" value="10"></label>
          <label>メモ<input id="serial-note" type="text" placeholder="例: オープン記念"></label>
          <label>有効期限<input id="serial-exp" type="datetime-local"></label>
        </div>
        <button id="btn-make-serials">シリアルを発行</button>

        <h3>発行結果</h3>
        <textarea id="serials-output" rows="8" readonly></textarea>
      </div>
    </section>

    <!-- 景品入荷 -->
    <section id="tab-inventory" class="tab">
      <div class="admin-login" id="inventory-login">
        <h2>管理ログイン</h2>
        <input id="admin-password-inv" type="password" placeholder="管理パスワード" />
        <button data-login-target="inventory">ログイン</button>
      </div>

      <div class="admin-area hidden" id="inventory-area">
        <h2>景品リスト</h2>
        <div class="note">※動画はURL指定。確率（％）合計が100になるように設定してください。</div>
        <table class="prize-table" id="prize-table">
          <thead>
            <tr><th>タイトル</th><th>動画URL</th><th>確率(%)</th><th>ON</th><th></th></tr>
          </thead>
          <tbody id="prize-body"></tbody>
          <tfoot>
            <tr>
              <td><input id="new-title" placeholder="新規タイトル"></td>
              <td><input id="new-url" placeholder="https://..."></td>
              <td><input id="new-percent" type="number" min="0" value="0"></td>
              <td class="center">-</td>
              <td><button id="add-prize">追加</button></td>
            </tr>
          </tfoot>
        </table>
        <div class="sum">合計：<span id="percent-sum">0</span>%</div>
        <button id="save-prizes">保存</button>
      </div>
    </section>
  </main>

  <footer>
    <small>© Gachapon</small>
  </footer>

  <script src="/app.js"></script>
</body>
</html>
