<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ガチャポン</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ---------- タブメニュー ---------- -->
  <div class="tab-menu">
    <button class="tab-btn" data-tab="gacha">ガチャポン</button>
    <button class="tab-btn" data-tab="mycollection">マイコレクション</button>
    <button class="tab-btn" data-tab="admin">管理</button>
  </div>

  <!-- ---------- ガチャタブ ---------- -->
  <div id="gacha" class="tab-page">

    <h2 class="title">ガチャポン</h2>

    <div id="spinArea">
      <span class="spin-icon">🔔</span>
      <span id="spinCount">残り回数：0</span>
    </div>

    <!-- 回数追加 -->
    <div class="add-spin-area">
      <input id="serialInput" type="text" placeholder="シリアルコード">
      <button id="addSpinBtn">追加</button>
    </div>

    <div id="completeText" class="complete-text"></div>

    <!-- ガチャ筐体 -->
    <div id="gachaContainer">
      <img id="gachaImage" src="gachapon.png" class="gacha-image" />
    </div>

    <!-- ★ 演出/景品動画を筐体の上に重ねる領域 -->
    <div id="videoOverlay">
      <video id="effectVideo" class="overlay-video" playsinline></video>
      <video id="prizeVideo" class="overlay-video" playsinline></video>
      <img id="duplicateThumb" class="overlay-thumb" />
    </div>

    <!-- 回すボタン群 -->
    <div class="gacha-btn-area">
      <button id="spinBtn">回す！</button>
      <button id="spin10Btn">10連で回す！</button>
    </div>

  </div>

  <!-- ---------- マイコレ ---------- -->
  <div id="mycollection" class="tab-page" style="display:none;">
    <h2 class="title">マイコレクション（いつでも再生）</h2>

    <div id="collectionContainer"></div>

    <!-- 動画再生オーバーレイ -->
    <div id="viewOverlay">
      <video id="viewVideo" playsinline controls></video>
      <button id="closeViewBtn">✕</button>
    </div>
  </div>

  <!-- ---------- 管理 ---------- -->
  <div id="admin" class="tab-page" style="display:none;">

    <h2 class="title">管理</h2>

    <!-- パスワード入力 -->
    <div class="admin-pass-box">
      <input type="password" id="adminPassInput" placeholder="パスワード">
      <button id="adminPassBtn">OK</button>
    </div>

    <div id="adminContent" style="display:none;">

      <!-- 景品動画登録 -->
      <h3>景品登録</h3>
      <input type="file" id="prizeFile" accept="video/*">
      <select id="prizeRarity">
        <option value="superrare">superrare</option>
        <option value="rare">rare</option>
        <option value="common">common</option>
        <option value="normal">normal</option>
      </select>
      <button id="uploadPrizeBtn">登録</button>

      <h3>登録済み景品</h3>
      <div id="prizeList"></div>

      <!-- レア度確率設定 -->
      <h3>レア度確率</h3>
      <div class="rarity-box">
        <label>superrare：<input id="probSuper" type="number" min="0" max="100"></label> %
      </div>
      <div class="rarity-box">
        <label>rare：<input id="probRare" type="number" min="0" max="100"></label> %
      </div>
      <div class="rarity-box">
        <label>common：<input id="probCommon" type="number" min="0" max="100"></label> %
      </div>
      <div class="rarity-box">
        <label>normal：<input id="probNormal" type="number" min="0" max="100"></label> %
      </div>
      <button id="saveProbabilityBtn">確率を保存</button>

    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
